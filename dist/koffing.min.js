!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var i in t)("object"==typeof exports?exports:e)[i]=t[i]}}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(1),a=(i=o)&&i.__esModule?i:{default:i};var s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gen7",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.format=n,this.folder=i,this.pokemon=[]}return r(e,[{key:"toJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return JSON.stringify(this,null,e)}},{key:"toShowdown",value:function(){var e=this.folder?this.folder+"/"+this.name:this.name,n="=== ["+this.format+"] "+e+" ===\n\n";return(n+=this.pokemon.map(function(e){return e.toString()}).join("\n\n")).trim()}},{key:"toString",value:function(){return this.toShowdown()}}],[{key:"fromObject",value:function(n){var t=new e;return t.name=n.name,t.format=n.format,t.folder=n.folder,t.pokemon=n.pokemon?n.pokemon.map(function(e){return a.default.fromObject(e)}):[],t}}]),e}();n.default=s},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();var r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=void 0,this.nickname=void 0,this.gender=void 0,this.item=void 0,this.ability=void 0,this.level=void 0,this.shiny=void 0,this.happiness=void 0,this.nature=void 0,this.evs=void 0,this.ivs=void 0,this.moves=[]}return i(e,[{key:"toJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return JSON.stringify(this,null,e)}},{key:"toShowdown",value:function(){var e="";if(this.nickname?e+=this.nickname+" ("+this.name+")":e+=""+this.name,this.gender&&this.gender.match(/^[MF]$/i)&&(e+=" ("+this.gender.toUpperCase()+")"),this.item&&(e+=" @ "+this.item),e+="\n",isNaN(this.level)||(e+="Level: "+this.level+"\n"),this.ability&&(e+="Ability: "+this.ability+"\n"),!0===this.shiny&&(e+="Shiny: Yes\n"),isNaN(this.happiness)||(e+="Happiness: "+this.happiness+"\n"),this.nature&&(e+=this.nature+" Nature\n"),this.evs){var n=this.evs;e+="EVs: "+["HP","Atk","Def","SpA","SpD","Spe"].filter(function(e){return!isNaN(n[e.toLowerCase()])}).map(function(e){return n[e.toLowerCase()]+" "+e}).join(" / ")+"\n"}if(this.ivs){var t=this.ivs;e+="IVs: "+["HP","Atk","Def","SpA","SpD","Spe"].filter(function(e){return!isNaN(t[e.toLowerCase()])}).map(function(e){return t[e.toLowerCase()]+" "+e}).join(" / ")+"\n"}return this.moves&&(e+=this.moves.map(function(e){return"- "+e}).join("\n")+"\n"),e.trim()}},{key:"toString",value:function(){return this.toShowdown()}}],[{key:"fromObject",value:function(n){var t=new e;return t.name=n.name,t.nickname=n.nickname,t.gender=n.gender,t.item=n.item,t.ability=n.ability,t.level=n.level,t.shiny=n.shiny,t.happiness=n.happiness,t.nature=n.nature,t.evs=n.evs,t.ivs=n.ivs,t.moves=n.moves,t}}]),e}();n.default=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(0),a=(i=o)&&i.__esModule?i:{default:i};var s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.teams=n}return r(e,[{key:"toJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return JSON.stringify(this,null,e)}},{key:"toShowdown",value:function(){return this.teams.map(function(e){return e.toString()}).join("\n\n").trim()}},{key:"toString",value:function(){return this.toShowdown()}}],[{key:"fromObject",value:function(n){var t=new e;return t.teams=n.teams?n.teams.map(function(e){return a.default.fromObject(e)}):[],t}}]),e}();n.default=s},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=s(t(1)),o=s(t(0)),a=s(t(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=n+""}return i(e,[{key:"parse",value:function(){var n=e.regexes,t=[],i={team:null,pokemon:null},s=this;return this.code.trim().split("\n").map(function(e){return e.trim()}).forEach(function(e){return e.match(n.team)?(i.team=new o.default,s._parseTeam(e,i.team),void t.push(i.team)):""===e||e.match(/^[- ]+$/)?void s._saveCurrent(t,i):i.pokemon?void(s._parseKeyValuePairs(e,i.pokemon)||s._parseEvsIvs(e,i.pokemon)||i.pokemon.moves.length<4&&e.match(n.move)&&i.pokemon.moves.push(n.move.exec(e)[1].trim())):(i.pokemon=new r.default,void s._parseNameLine(e,i.pokemon))}),this._saveCurrent(t,i),new a.default(t)}},{key:"_parseTeam",value:function(n,t){var i=e.regexes.team.exec(n),r=i[2].split("/"),o=void 0,a=void 0;r.length>1?(a=r.shift(),o=r.join("/")):o=i[2],t.format=i[1].trim(),t.name=o.trim(),t.folder=a?a.trim():void 0}},{key:"_parseNameLine",value:function(n,t){var i=e.regexes;if(n.match(i.nickname_name)){var r=i.nickname_name.exec(n);t.nickname=r[1].trim(),t.name=r[2].trim()}else if(n.match(i.name)){var o=i.name.exec(n);t.name=o[1].trim()}n.match(i.gender)&&(t.gender=i.gender.exec(n)[1].toUpperCase().trim()),n.match(i.item)&&(t.item=i.item.exec(n)[1].trim())}},{key:"_parseEvsIvs",value:function(n,t){var i=e.regexes;if(n.match(i.eivs)){var r=i.eivs.exec(n),o=r[1].toLowerCase(),a=r[2].split("/"),s="evs"===o?255:31;return a.forEach(function(e){var n=i.eivs_value.exec(e.trim().toLowerCase());n?(t[o]||(t[o]={}),t[o][n[2]]=parseFloat(n[1]),t[o][n[2]]>s&&(t[o][n[2]]=s)):console.error("Invalid syntax for "+o+": "+e)}),!0}return!1}},{key:"_parseKeyValuePairs",value:function(n,t){var i=e.regexes;return["ability","level","shiny","happiness","nature"].some(function(e){return!!n.match(i[e])&&(t[e]=i[e].exec(n)[1].trim(),isNaN(t[e])||(t[e]=parseFloat(t[e])),"happiness"===e&&t[e]>255&&(t[e]=255),"level"===e&&t[e]<1&&(t[e]=1),"level"===e&&t[e]>100&&(t[e]=100),"shiny"===e&&(t[e]=!!t[e].match(/yes/i)),!0)})}},{key:"_saveCurrent",value:function(e,n){return n.team||(n.team=new o.default,e.push(n.team)),n.pokemon&&(n.team.pokemon.push(n.pokemon),n.pokemon=null),this}},{key:"format",value:function(){return this.code=this.parse().toString(),this}},{key:"toString",value:function(){return this.code}}]),e}();u.regexes={team:/^===\s+\[(.*)\]\s+(.*)\s+===$/,gender:/\((F|M)\)/i,item:/@\s?(.*)$/i,name:/^([^()=@]{2,})/i,nickname_name:/^([^()=@]*)\s+\(([^()=@]{2,})\)/i,ability:/^Ability:\s?(.*)$/i,level:/^Level:\s?([0-9]{1,3})$/i,shiny:/^Shiny:\s?(Yes|No)$/i,happiness:/^Happiness:\s?([0-9]{1,3})$/i,eivs:/^([EI]Vs):\s?(.*)$/i,eivs_value:/^([0-9]+)\s+(hp|atk|def|spa|spd|spe)$/i,nature:/^(.*)\s+Nature$/,move:/^[-~]\s?(.*)$/i},n.default=u},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ShowdownParser=n.Koffing=void 0;var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=u(t(1)),o=u(t(0)),a=u(t(2)),s=u(t(3));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"parse",value:function(e){return e instanceof a.default||e instanceof o.default||e instanceof r.default?e:e instanceof s.default?e.parse():new s.default(e).parse()}},{key:"format",value:function(e){return this.parse(e).toShowdown()}},{key:"toJson",value:function(e){return this.parse(e).toJson()}},{key:"toShowdown",value:function(e){return e instanceof a.default||e instanceof o.default||e instanceof r.default?e.toShowdown():e instanceof s.default?e.parse().format():(("string"==typeof value||value instanceof String)&&(e=JSON.parse(e)),a.default.fromObject(JSON.parse(e)).toShowdown())}}]),e}();n.Koffing=f,n.ShowdownParser=s.default}])});